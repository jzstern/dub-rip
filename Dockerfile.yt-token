FROM node:20-alpine

WORKDIR /app

COPY services/yt-token/package.json services/yt-token/package-lock.json ./
RUN npm ci

COPY services/yt-token/index.js ./

ENV PORT=8080
ENV NODE_OPTIONS="--max-old-space-size=512"
EXPOSE 8080

USER node

CMD ["node", "index.js"]
